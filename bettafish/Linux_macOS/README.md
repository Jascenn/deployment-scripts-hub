# ğŸŸ BettaFish éƒ¨ç½²å·¥å…·åŒ…

> macOS & Linux ä¸€é”®éƒ¨ç½²æ–¹æ¡ˆ

---

## ğŸ“– å¿«é€Ÿå¼€å§‹

### ğŸ†• æ–°ç”¨æˆ·ï¼ˆ3æ­¥ï¼‰

```bash
# 1. æŸ¥çœ‹å¿«é€Ÿå…¥é—¨
cat START.txt

# 2. å¯åŠ¨äº¤äº’å¼èœå•
./menu.sh

# 3. æˆ–ç›´æ¥éƒ¨ç½²
./docker-deploy.sh
```

### âš¡ ç†Ÿç»ƒç”¨æˆ·

```bash
# ç›´æ¥éƒ¨ç½²
./docker-deploy.sh

# æˆ–ä½¿ç”¨èœå•é€‰æ‹©åŠŸèƒ½
./menu.sh
```

---

## ğŸ“ ç›®å½•ç»“æ„

```
Linux_macOS/
â”œâ”€â”€ ğŸ“„ START.txt                  â† å¿«é€Ÿå…¥é—¨æŒ‡å—ï¼ˆä»è¿™é‡Œå¼€å§‹ï¼ï¼‰
â”œâ”€â”€ ğŸ“„ README.md                  â† æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸš€ docker-deploy.sh           â† ä¸»éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ ğŸ¯ menu.sh                    â† äº¤äº’å¼èœå•ï¼ˆæ¨èï¼‰
â”œâ”€â”€ ğŸ” validate-paths.sh          â† è·¯å¾„éªŒè¯å·¥å…·
â”œâ”€â”€ ğŸ”§ diagnose.sh                â† ç³»ç»Ÿè¯Šæ–­å·¥å…·
â”œâ”€â”€ ğŸ—‘ï¸  docker-cleanup.sh         â† Docker æ¸…ç†å·¥å…·
â”œâ”€â”€ ğŸ“‹ log-cleanup.sh             â† æ—¥å¿—æ¸…ç†å·¥å…·
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                      â† æ–‡æ¡£èµ„æº
â”‚   â”œâ”€â”€ README.md                 â† æ–‡æ¡£å¯¼èˆª
â”‚   â”œâ”€â”€ ç”¨æˆ·å®Œæ•´æŒ‡å—.html        â† å®Œæ•´äº¤äº’å¼æŒ‡å—ï¼ˆæ¨èï¼‰
â”‚   â”œâ”€â”€ ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ.md           â† Markdown ç‰ˆæ–‡æ¡£
â”‚   â”œâ”€â”€ å¿«é€Ÿå‚è€ƒå¡ç‰‡.md           â† å‘½ä»¤é€ŸæŸ¥è¡¨
â”‚   â””â”€â”€ æ–‡ä»¶å¤¹ç»“æ„è¯´æ˜.html       â† ç›®å½•ç»“æ„å¯è§†åŒ–
â”‚
â”œâ”€â”€ ğŸ“‚ logs/                      â† éƒ¨ç½²æ—¥å¿—
â”œâ”€â”€ ğŸ“‚ backups/                   â† å¤‡ä»½æ–‡ä»¶
â”œâ”€â”€ ğŸ“‚ offline-packages/          â† ç¦»çº¿å®‰è£…åŒ…
â””â”€â”€ ğŸ“‚ BettaFish-main/            â† æºç ç›®å½•ï¼ˆéƒ¨ç½²åè‡ªåŠ¨ä¸‹è½½ï¼‰
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. äº¤äº’å¼èœå• (`menu.sh`)

```bash
./menu.sh
```

**åŠŸèƒ½åŒ…æ‹¬**:
- ğŸš€ ä¸€é”®éƒ¨ç½²
- ğŸ“– æ–‡æ¡£æµè§ˆ
- ğŸ” ç³»ç»Ÿè¯Šæ–­
- ğŸ—‘ï¸ ç¯å¢ƒæ¸…ç†
- ğŸ“Š æ—¥å¿—æŸ¥çœ‹
- ğŸ”§ å·¥å…·ç®±

**ä¼˜åŠ¿**:
- å›¾å½¢åŒ–ç•Œé¢
- æ–°æ‰‹å‹å¥½
- åŠŸèƒ½é›†ä¸­
- æ“ä½œç®€å•

### 2. ä¸»éƒ¨ç½²è„šæœ¬ (`docker-deploy.sh`)

```bash
./docker-deploy.sh
```

**ç‰¹æ€§**:
- ğŸ” è‡ªåŠ¨ç¯å¢ƒæ£€æµ‹
- ğŸ“¦ ä¸€é”®æ‹‰å–é•œåƒ
- âš™ï¸ äº¤äº’å¼é…ç½®
- ğŸ³ Docker Compose éƒ¨ç½²
- ğŸ“Š å®æ—¶è¿›åº¦æ˜¾ç¤º
- âœ… éƒ¨ç½²åéªŒè¯

**éƒ¨ç½²æµç¨‹**:
1. æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒï¼ˆDockerã€ç£ç›˜ç©ºé—´ç­‰ï¼‰
2. ä¸‹è½½ BettaFish æºç 
3. é…ç½® API å¯†é’¥å’Œæ•°æ®åº“
4. æ‹‰å– Docker é•œåƒ
5. å¯åŠ¨æœåŠ¡å®¹å™¨
6. éªŒè¯éƒ¨ç½²ç»“æœ

### 3. è¯Šæ–­å·¥å…· (`tools/diagnose.sh`)

```bash
./tools/diagnose.sh
```

**æ£€æŸ¥é¡¹ç›®**:
- âœ… Docker è¿è¡ŒçŠ¶æ€
- âœ… å®¹å™¨è¿è¡ŒçŠ¶æ€
- âœ… ç«¯å£ç›‘å¬æƒ…å†µ
- âœ… Docker ç«¯å£æ˜ å°„
- âœ… é˜²ç«å¢™çŠ¶æ€
- âœ… HTTP æœåŠ¡æµ‹è¯•
- âœ… å®¹å™¨æ—¥å¿—åˆ†æ
- âœ… ç½‘ç»œé…ç½®

**é€‚ç”¨åœºæ™¯**:
- éƒ¨ç½²å¤±è´¥æ’æŸ¥
- æœåŠ¡æ— æ³•è®¿é—®
- å®šæœŸå¥åº·æ£€æŸ¥

### 4. æ¸…ç†å·¥å…· (`tools/docker-cleanup.sh`)

```bash
./tools/docker-cleanup.sh
```

**æ¸…ç†å†…å®¹**:
- ğŸ—‘ï¸ åœæ­¢æ‰€æœ‰ BettaFish å®¹å™¨
- ğŸ—‘ï¸ åˆ é™¤å®¹å™¨å’Œé•œåƒ
- ğŸ—‘ï¸ æ¸…ç†æœªä½¿ç”¨çš„ Docker èµ„æº
- ğŸ—‘ï¸ å¯é€‰æ¸…ç†æ•°æ®å·

### 5. æ—¥å¿—ç®¡ç† (`tools/log-cleanup.sh`)

```bash
./tools/log-cleanup.sh
```

**åŠŸèƒ½**:
- ğŸ“‹ æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶åˆ—è¡¨
- ğŸ—‘ï¸ æ¸…ç†æ—§æ—¥å¿—ï¼ˆä¿ç•™æœ€æ–°5ä¸ªï¼‰
- ğŸ“Š æ˜¾ç¤ºæ—¥å¿—æ–‡ä»¶å¤§å°

---

## ğŸ“š æ–‡æ¡£èµ„æº

### æ¨èé˜…è¯»é¡ºåº

#### å®Œå…¨æ–°æ‰‹
```
1ï¸âƒ£ START.txt                      â† å¿«é€Ÿå…¥é—¨
2ï¸âƒ£ docs/ç”¨æˆ·å®Œæ•´æŒ‡å—.html          â† å®Œæ•´æ•™ç¨‹
3ï¸âƒ£ docs/å¿«é€Ÿå‚è€ƒå¡ç‰‡.md            â† å‘½ä»¤é€ŸæŸ¥
```

#### æœ‰ç»éªŒç”¨æˆ·
```
1ï¸âƒ£ docs/å¿«é€Ÿå‚è€ƒå¡ç‰‡.md            â† å¿«é€Ÿä¸Šæ‰‹
2ï¸âƒ£ docs/ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ.md            â† è¯¦ç»†å‚è€ƒ
```

### æ–‡æ¡£è¯´æ˜

| æ–‡æ¡£ | æ ¼å¼ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `START.txt` | æ–‡æœ¬ | å¿«é€Ÿå…¥é—¨ï¼Œäº†è§£åŸºæœ¬æ“ä½œ |
| `ç”¨æˆ·å®Œæ•´æŒ‡å—.html` | ç½‘é¡µ | è¯¦ç»†å­¦ä¹ ï¼Œäº¤äº’å¼ä½“éªŒ |
| `ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ.md` | Markdown | ç¦»çº¿é˜…è¯»ï¼Œæ‰“å°æ–‡æ¡£ |
| `å¿«é€Ÿå‚è€ƒå¡ç‰‡.md` | Markdown | æ—¥å¸¸ä½¿ç”¨ï¼Œå‘½ä»¤é€ŸæŸ¥ |
| `æ–‡ä»¶å¤¹ç»“æ„è¯´æ˜.html` | ç½‘é¡µ | äº†è§£ç›®å½•ç»“æ„ |

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### éƒ¨ç½²ç›¸å…³
```bash
# å¼€å§‹éƒ¨ç½²
./docker-deploy.sh

# ä½¿ç”¨èœå•
./menu.sh

# æ¸…ç†ç¯å¢ƒ
./tools/docker-cleanup.sh

# è¿è¡Œè¯Šæ–­
./tools/diagnose.sh
```

### Docker ç›¸å…³
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps -a | grep bettafish

# æŸ¥çœ‹æ—¥å¿—
docker logs bettafish

# é‡å¯æœåŠ¡
cd BettaFish-main && docker-compose restart

# åœæ­¢æœåŠ¡
cd BettaFish-main && docker-compose stop

# å¯åŠ¨æœåŠ¡
cd BettaFish-main && docker-compose up -d
```

### æ—¥å¿—ç›¸å…³
```bash
# æŸ¥çœ‹æœ€æ–°æ—¥å¿—
tail -f logs/deploy_*.log

# æ¸…ç†æ—§æ—¥å¿—
./tools/log-cleanup.sh

# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
ls -lh logs/
```

---

## âš¡ ç³»ç»Ÿè¦æ±‚

### æœ€ä½é…ç½®
- **æ“ä½œç³»ç»Ÿ**: macOS 10.14+ / Ubuntu 18.04+ / CentOS 7+
- **Docker**: 20.10+
- **ç£ç›˜ç©ºé—´**: 20GB+
- **å†…å­˜**: 4GB+
- **ç½‘ç»œ**: å¯è®¿é—® Docker Hub æˆ–é•œåƒæº

### æ¨èé…ç½®
- **æ“ä½œç³»ç»Ÿ**: macOS 12+ / Ubuntu 22.04+
- **Docker**: 24.0+
- **ç£ç›˜ç©ºé—´**: 50GB+
- **å†…å­˜**: 8GB+
- **CPU**: 4æ ¸+

---

## â“ å¸¸è§é—®é¢˜

### Q: é¦–æ¬¡ä½¿ç”¨åº”è¯¥æ€ä¹ˆå¼€å§‹ï¼Ÿ

**A**: æŒ‰ä»¥ä¸‹é¡ºåºæ“ä½œï¼š
```bash
1. cat START.txt                    # é˜…è¯»å¿«é€Ÿå…¥é—¨
2. ./menu.sh                        # å¯åŠ¨èœå•ï¼Œé€‰æ‹©"æŸ¥çœ‹æ–‡æ¡£"
3. ./docker-deploy.sh               # å¼€å§‹éƒ¨ç½²
```

### Q: Docker æœªå®‰è£…æ€ä¹ˆåŠï¼Ÿ

**A**: è®¿é—® [Docker å®˜ç½‘](https://www.docker.com/products/docker-desktop) ä¸‹è½½å®‰è£…ï¼š
- macOS: ä¸‹è½½ Docker Desktop for Mac
- Linux: å‚è€ƒå®˜æ–¹å®‰è£…æ–‡æ¡£

### Q: éƒ¨ç½²å¤±è´¥å¦‚ä½•æ’æŸ¥ï¼Ÿ

**A**: æŒ‰ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š
```bash
1. ./tools/diagnose.sh              # è¿è¡Œè¯Šæ–­
2. cat logs/deploy_*.log            # æŸ¥çœ‹æ—¥å¿—
3. docker ps -a                     # æ£€æŸ¥å®¹å™¨çŠ¶æ€
```

### Q: å¦‚ä½•æ¸…ç†é‡æ–°éƒ¨ç½²ï¼Ÿ

**A**: ä½¿ç”¨æ¸…ç†å·¥å…·ï¼š
```bash
./tools/docker-cleanup.sh           # æ¸…ç†ç¯å¢ƒ
./docker-deploy.sh                  # é‡æ–°éƒ¨ç½²
```

### Q: ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ

**A**: æ£€æŸ¥å¹¶ä¿®æ”¹ç«¯å£ï¼š
```bash
# 1. æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :5000  # macOS
netstat -tlnp | grep 5000  # Linux

# 2. ä¿®æ”¹ docker-compose.yml ä¸­çš„ç«¯å£æ˜ å°„
# 3. é‡æ–°éƒ¨ç½²
```

### Q: å¦‚ä½•æ›´æ–° BettaFishï¼Ÿ

**A**: é‡æ–°æ‹‰å–é•œåƒå¹¶é‡å¯ï¼š
```bash
cd BettaFish-main
docker-compose pull
docker-compose up -d
```

---

## ğŸ”§ é«˜çº§æ“ä½œ

### è‡ªå®šä¹‰é…ç½®

ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š
```bash
cd BettaFish-main
vim .env                            # ä¿®æ”¹ç¯å¢ƒå˜é‡
vim docker-compose.yml              # ä¿®æ”¹ Docker é…ç½®
```

### æ•°æ®å¤‡ä»½

```bash
# å¤‡ä»½æ•°æ®åº“
docker exec bettafish-db pg_dump -U bettafish bettafish > backups/db_backup.sql

# å¤‡ä»½é…ç½®
cp BettaFish-main/.env backups/env_backup.txt
```

### ç¦»çº¿éƒ¨ç½²

å‚è€ƒ `offline-packages/README.md`

---

## ğŸ“Š é¡¹ç›®ä¿¡æ¯

### ç‰ˆæœ¬
- **å·¥å…·åŒ…ç‰ˆæœ¬**: v2.0
- **BettaFishç‰ˆæœ¬**: ä»¥å®˜æ–¹æœ€æ–°ç‰ˆä¸ºå‡†
- **æ›´æ–°æ—¶é—´**: 2024-11-16

### ç›¸å…³é“¾æ¥
- ğŸŒ **å®˜æ–¹ä»“åº“**: [BettaFish GitHub](https://github.com/666ghj/BettaFish)
- ğŸ“¦ **éƒ¨ç½²è„šæœ¬**: [deployment-scripts-hub](https://github.com/Jascenn/deployment-scripts-hub)
- ğŸ’¬ **é—®é¢˜åé¦ˆ**: [Issues](https://github.com/Jascenn/deployment-scripts-hub/issues)

### è´¡çŒ®è€…
- åŸé¡¹ç›®: 666ghj
- éƒ¨ç½²å·¥å…·: Jascenn

---

## ğŸ“ è®¸å¯è¯

æœ¬éƒ¨ç½²å·¥å…·åŒ…éµå¾ª MIT è®¸å¯è¯ã€‚

BettaFish é¡¹ç›®è¯·å‚è€ƒå…¶å®˜æ–¹è®¸å¯è¯ã€‚

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

```bash
# ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Ÿä»è¿™é‡Œå¼€å§‹ï¼
cat START.txt

# æˆ–è€…ç›´æ¥å¯åŠ¨èœå•
./menu.sh
```

---

**ç¥æ‚¨éƒ¨ç½²é¡ºåˆ©ï¼** ğŸŸâœ¨

éœ€è¦å¸®åŠ©ï¼ŸæŸ¥çœ‹ `START.txt` æˆ–è¿è¡Œ `./menu.sh`
