========================================
  BettaFish Windows 部署工具
  文件结构说明
========================================

版本: v4.0.3
更新日期: 2025-11-15

========================================
  📋 核心文档（推荐阅读）
========================================

1. README.md
   主说明文档，包含：
   - 快速开始指南
   - 工具列表
   - 常见问题
   - 技术细节

2. 使用指南-v4.0.3.txt
   完整的用户使用指南，包含：
   - 所有工具的详细说明
   - 典型使用场景
   - 常见问题 FAQ
   - 技术要点

3. 快速修复指南.txt
   快速参考卡，包含：
   - 核心功能说明
   - 常见问题快速解决
   - 推荐操作流程

4. 问题修复说明.md
   详细的故障排查指南，包含：
   - 问题诊断步骤
   - 根本原因分析
   - 详细修复方案

========================================
  🛠️ 核心脚本文件（双击运行）
========================================

【主要工具】

docker-deploy-v4.bat ⭐
  功能: 一键完整部署
  用途: 主力部署工具，首选使用
  说明: 集成所有功能，自动化程度最高

download-project.bat
  功能: 下载 BettaFish 项目源码
  用途: 单独下载项目，不立即部署
  说明: 从 GitHub 下载最新源码

quick-fix.bat
  功能: 预拉取 Docker 镜像
  用途: 提前准备镜像，加速后续部署
  说明: 与 docker-deploy-v4.bat 使用相同逻辑

【诊断工具】

debug-env.bat
  功能: API 密钥诊断
  用途: 诊断密钥不持久化问题
  说明: 检查 .env 文件和密钥配置

diagnose.bat
  功能: 系统全面诊断
  用途: 遇到问题时全面检查
  说明: 检查 Docker、网络、端口、编码等

【修复工具】

fix-docker-mirrors.bat
  功能: 清理 Docker 镜像源配置
  用途: 遇到 docker.1panel.live 403 错误
  说明: 自动清理无效的镜像源配置

fix-all.bat
  功能: 修复 PowerShell 脚本编码
  用途: 脚本报错或无法运行时
  说明: 统一修复所有脚本的编码问题

fix-encoding.bat
  功能: 单独修复编码问题
  用途: 特定脚本编码问题
  说明: 与 fix-all.bat 类似，更精细

【旧版工具（保留兼容）】

docker-deploy.bat
  功能: v3.x 版本部署脚本
  状态: 已过时，建议使用 v4 版本
  说明: 保留用于兼容性

========================================
  📂 PowerShell 脚本文件
========================================

每个 .bat 文件都有对应的 .ps1 文件：

docker-deploy-v4.ps1
  docker-deploy-v4.bat 的 PowerShell 实现
  包含实际的部署逻辑

debug-env.ps1
  debug-env.bat 的 PowerShell 实现
  包含密钥诊断逻辑

diagnose.ps1
  diagnose.bat 的 PowerShell 实现
  包含系统诊断逻辑

quick-fix.ps1
  quick-fix.bat 的 PowerShell 实现
  包含镜像拉取逻辑

... (其他 .ps1 文件类似)

说明:
- .bat 文件是启动器，用户双击运行
- .ps1 文件是实现，包含实际逻辑
- 不要直接双击 .ps1 文件

========================================
  📁 目录结构
========================================

Windows-Version/
│
├── 📄 核心文档
│   ├── README.md                 ← 主说明文档
│   ├── 使用指南-v4.0.3.txt      ← 完整使用指南
│   ├── 快速修复指南.txt         ← 快速参考
│   ├── 问题修复说明.md          ← 故障排查
│   └── 文件说明.txt             ← 本文件
│
├── 🔧 核心工具 (.bat 文件)
│   ├── docker-deploy-v4.bat     ← 主部署脚本
│   ├── download-project.bat     ← 下载项目
│   ├── quick-fix.bat            ← 预拉取镜像
│   ├── debug-env.bat            ← 密钥诊断
│   ├── diagnose.bat             ← 系统诊断
│   ├── fix-docker-mirrors.bat   ← 镜像源修复
│   └── fix-all.bat              ← 编码修复
│
├── 💻 实现脚本 (.ps1 文件)
│   ├── docker-deploy-v4.ps1
│   ├── download-project.ps1
│   ├── quick-fix.ps1
│   ├── debug-env.ps1
│   ├── diagnose.ps1
│   └── ... (其他 .ps1 文件)
│
├── 📦 项目源码（自动生成）
│   └── BettaFish-main/
│       ├── .env                 ← 环境配置
│       ├── docker-compose.yml   ← Docker 编排
│       └── ... (项目文件)
│
├── 📚 历史文档归档
│   └── docs-archive/
│       ├── README.txt           ← 归档说明
│       └── ... (历史文档)
│
├── 🔄 备份文件
│   └── backups/
│       └── ... (自动备份)
│
└── 📊 日志文件
    └── logs/
        └── ... (部署日志)

========================================
  🚀 推荐使用流程
========================================

【首次使用】

1. 查看文档
   README.md 或 使用指南-v4.0.3.txt

2. 准备 API 密钥
   - 主 API 密钥
   - Tavily API 密钥
   - Bocha API 密钥

3. 启动 Docker Desktop

4. 运行部署
   双击 docker-deploy-v4.bat

【遇到问题】

1. 快速查找
   快速修复指南.txt

2. 运行诊断
   debug-env.bat 或 diagnose.bat

3. 详细排查
   问题修复说明.md

【日常维护】

1. 更新项目
   download-project.bat

2. 重新部署
   docker-deploy-v4.bat

========================================
  ⚠️ 注意事项
========================================

【文件操作】

✅ 可以做:
- 双击 .bat 文件运行
- 查看 .txt/.md 文档
- 修改 BettaFish-main/.env 配置

❌ 不要做:
- 直接双击 .ps1 文件
- 删除 .ps1 文件（.bat 依赖它们）
- 修改 .bat/.ps1 文件（除非你知道在做什么）

【备份重要】

以下文件包含配置，建议备份:
- BettaFish-main/.env
- logs/ 目录（如有问题需要分析）

【清理建议】

可以定期清理:
- backups/ 目录的旧备份
- logs/ 目录的旧日志

不要清理:
- 核心 .bat/.ps1 文件
- 核心文档文件
- BettaFish-main/ 目录

========================================
  📞 获取帮助
========================================

【查看文档】
1. README.md - 主文档
2. 使用指南-v4.0.3.txt - 详细指南
3. 快速修复指南.txt - 快速参考

【运行诊断】
debug-env.bat - API 密钥问题
diagnose.bat - 系统问题

【查找历史文档】
docs-archive/ - 历史技术文档

========================================

📌 提示: 建议先阅读 README.md 了解基本使用

========================================
